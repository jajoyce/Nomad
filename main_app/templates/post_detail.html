{% extends 'base.html' %}
<!-- comment -->
{% block title %} {{post.title}} {% endblock %}
<!-- comment -->
{% block content%}
<div class="container">
  <div class="row">
    <div class="col">
      <img src="{{post.img}}" class="card-img mb-3 mt-5" alt="{{post.title}}" />
      <h1 class="text-center">{{post.title}}</h1>
      <p>Written by: <strong>{{post.author}}</strong></p>
      <small>Published from: {{ post.city }} on {{post.created_at}}</small>
      <div class="mt-4">
        <p>{{ post.content }}</p>
      </div>
      <div>
        <a
          href="{% url 'post_update' post.pk %}"
          type="button"
          class="btn btn-primary"
          >Update Post</a
        >
        <a
          href="{% url 'post_delete' post.pk %}"
          type="button"
          class="btn btn-danger"
          >Delete Post</a
        >
      </div>
      <div class="container mt-4" >
        <div class="row">
          <div class="col">
            <div>
              There are {{ post.comments.count }} comments on this post:
            </div>
            <div>
              {% for comment in post.comments.all %} 
              <div class="card">
                <div class="card-body"> 
                <h6>
                  {{comment.author}}
                </h6>
              <p>{{comment.content}}</p>
                </div>
              </div>
              {% endfor %}
              {% if user.is_authenticated %}
              <div class="card">
                <div class="card-body">
                  <form method="POST">
                    {% csrf_token %} 
                    {{ form.non_field_errors }}
                    <div class="fieldWrapper">
                        {{ form.content.errors }}
                        <label for="{{ form.content.id_for_label }}" class="mb-2">Leave your own comment on this post!</label><br>
                        {{ form.content }}
                    </div>
                    <input type="submit" value="Add Comment" class="btn btn-primary">
                  </form>
                </div>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
